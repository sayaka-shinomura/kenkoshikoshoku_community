<div class="container">
  <h4 class="my-3 text-center">レビュー編集</h4>
  <div class="row">
    <div class="col-6 px-5 px-sm-0 mx-auto">
      <%= form_for [@recipe, @review] do |f| %>
    <div class="form-group" id="star">
      <%= f.hidden_field :star, id: :review_star, class: 'form-control' %>
      <div id="star_<%= @review.id %>"></div>
    </div>
    <script>
      $(document).on('turbolinks:load', function() {
        let elem = document.querySelector('#star_<%= @review.id %>');
        if (elem == null) return;

        elem.innerHTML = ""
        let opt = {
          starOn: "<%= asset_path('star-on.png') %>",
          starOff: "<%= asset_path('star-off.png') %>",
          starHalf: "<%= asset_path('star-half.png') %>",
          scoreName: 'review[star]',
        };
        raty(elem, opt);
      });
    </script>

    <div class="form-group" id="star">
      <%= f.hidden_field :star, id: :review_star, class: 'form-control' %>
      <div id="post_raty"></div>
    </div>

    <script>
      $(document).on('turbolinks:load', function() {
        let elem = document.querySelector('#star_<%= @review.star %>');
        if (elem == null) return;

        elem.innerHTML = "";
        let opt = {
          starOn: "<%= asset_path('star-on.png') %>",
          starOff: "<%= asset_path('star-off.png') %>",
          score: "<%= @review.star %>",
          readOnly: true,
        };
        raty(elem, opt);
        });
    </script>

    <div class="form-group">
      <%= f.text_area :comment, autofocus: true, id:"inputComment", class:"form-control", :size=>"20x4", placeholder: comment_text %>
    </div>

    <div class="form-group">
      <%= f.submit 'レビューを変更する', class: 'btn btn-info' %>
    </div>
<% end %>


   </div>
  </div>
</div>

